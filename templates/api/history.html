{% extends 'base.html' %}

{% block content %}
    <title>Historical Weather</title>
</head>
<body>
    <div class="container">
        <h1 class="mt-5">Get Historical Weather</h1>
        <h4><i>*This data is limited per my current API subscription</i></h4>

        <form id="historical-weather-form" method="post" action="/history">

            <div class="mb-3">
                <label for="location" class="form-label">Enter Location (City, State):</label>
                <input type="text" id="location" name="location" class="form-control" required>
            </div>
            <div class="mb-3">
                <label for="date" class="form-label">Enter Date (YYYY-MM-DD):</label>
                <input type="text" id="date" name="date" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Get Historical Weather</button>
        </form>

        <div id="historical-weather-data" class="mt-4">
            {% if historical_weather_data %}
                <h2>Historical Weather:</h2>
                <pre>{{ historical_weather_data | tojson(indent=4) }}</pre>
            {% endif %}
        </div>
    </div>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="mt-4">
            {% for message in messages %}
                <li class="alert alert-danger">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

{% endblock %}